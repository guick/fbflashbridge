<?xml version="1.0" encoding="utf-8"?>
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml" applicationComplete="setTimeout(init, 7000)" layout="absolute" width="542" height="496">
	
	<mx:Script>
		<![CDATA[
			import be.wellconsidered.social.facebook.events.FacebookBridgeEvent;
			import be.wellconsidered.social.facebook.FacebookBridge;
		
			import flash.utils.setTimeout;
			
			private function init():void {
				tracer("Init FBFlashBridge");
				
				FacebookBridge.getInstance().addEventListener(FacebookBridgeEvent.RESULT, onFBResult, false, 0, true);
				FacebookBridge.getInstance().init();
			}
			
			private function onFBResult(e:FacebookBridgeEvent):void {
				tracer("Response of " + e.func);
				
				tracer(typeof(e.data) + " - " + pr(e.data));
				
				tracer("--------------------------------------------------------");
			}
			
			private function tracer(value:*):void {
				trace(value);
				
				txtTrace.text += value + "\n";
			}
			
			private function pr(obj:*, level:int = 0, output:String = ""):* {
			    var tabs:String = "";
			    for(var i:int = 0; i < level; i++, tabs += "\t");
			    
			    for(var child:* in obj) {
			        output += tabs +"["+ child +"] => "+ obj[child];
			        
			        var childOutput:String = pr(obj[child], level+1);
			        if(childOutput != '') output += ' {\n'+ childOutput + tabs +'}';
			        
			        output += "\n";
			    }
			    
			    return output;
			 }		
			
		]]>
	</mx:Script>
	
	<mx:TextArea x="10" y="10" width="522" height="476" id="txtTrace"/>
	
</mx:Application>
